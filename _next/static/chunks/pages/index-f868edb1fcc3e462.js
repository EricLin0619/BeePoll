(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{48312:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return s(37582)}])},37582:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return F}});var a=s(85893),i=s(11163),n=s(67294);function r(){let[e,t]=(0,n.useState)(0),[s,i]=(0,n.useState)(0),[r,c]=(0,n.useState)(0),[l,o]=(0,n.useState)(0);return(0,n.useEffect)(()=>{let e=new Date("8/31/2023 23:59:59"),s=setInterval(()=>{let s=new Date,a=e.getTime()-s.getTime();t(Math.floor(a/864e5)),i(Math.floor(a%864e5/36e5)),c(Math.floor(a%36e5/6e4)),o(Math.floor(a%6e4/1e3))},1e3);return()=>{clearInterval(s)}},[]),(0,a.jsxs)("span",{className:"countdown font-mono text-base ml-auto",children:[(0,a.jsx)("span",{style:{"--value":e}}),"d",(0,a.jsx)("span",{style:{"--value":s},className:"ml-1"}),"h",(0,a.jsx)("span",{style:{"--value":r},className:"ml-1"}),"m",(0,a.jsx)("span",{style:{"--value":l},className:"ml-1"}),"s"]})}function c(){let e=(0,i.useRouter)();return(0,a.jsx)("div",{className:" card dark:text-white dark:bg-slate-800 dark:border-white dark:border-solid dark:border-2 w-[350px] p-4 bg-white shadow-[0_3px_10px_rgb(0,0,0,0.2)] mt-3 cursor-pointer text-[#2E1503] ",onClick:function(){e.push("/card")},children:(0,a.jsxs)("div",{className:"card-body",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("h2",{className:"card-title",children:"Vote #161"}),(0,a.jsx)(r,{})]}),(0,a.jsx)("p",{className:"text-left",children:"We are using cookies for no reason. We are using cookies for no reason."}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("p",{className:"text-xs text-left font-bold",children:"Yes"}),(0,a.jsx)("p",{className:"text-xs text-right font-bold",children:"60%"})]}),(0,a.jsx)("progress",{className:"progress progress-success w-auto dark:bg-slate-950",value:60,max:"100"}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("p",{className:"text-xs text-left font-bold",children:"No"}),(0,a.jsx)("p",{className:"text-xs text-right font-bold",children:"40%"})]}),(0,a.jsx)("progress",{className:"progress progress-error w-auto dark:bg-slate-950 text-[#FF5E6C]",value:40,max:"100"}),(0,a.jsxs)("div",{className:"flex justify-between mt-4",children:[(0,a.jsx)("button",{className:"btn btn-outline btn-success w-20 border-2",onClick:function(e){e.stopPropagation()},children:"Accept"}),(0,a.jsx)("button",{className:"btn btn-outline btn-error w-20 border-2",onClick:function(e){e.stopPropagation()},children:"Deny"})]})]})})}function l(){return(0,a.jsx)("div",{className:"w-[170px] ml-4 mr-auto  mb-2 rounded-lg p-2 shadow-[0_3px_10px_rgb(0,0,0,0.2)]",children:(0,a.jsx)("div",{children:(0,a.jsxs)("select",{className:"bg-white text-black select select-bordered w-[150px] max-w-xs",children:[(0,a.jsx)("option",{disabled:!0,selected:!0,children:"Status"}),(0,a.jsx)("option",{children:"All"}),(0,a.jsx)("option",{children:"Open"}),(0,a.jsx)("option",{children:"Closed"})]})})})}function o(){return(0,a.jsxs)("div",{className:"mt-10",children:[(0,a.jsxs)("div",{className:"flex mt-10 w-1/2",children:[(0,a.jsx)("p",{className:"font-mono text-black font-bold text-3xl ml-5 mt-3 dark:text-white",children:"VOTING"}),(0,a.jsx)("button",{className:"btn btn-outline h-1/3 p-1 btn-warning ml-auto ",children:"New Vote"})]}),(0,a.jsx)("div",{className:"divider ml-5 mr-auto w-1/2 mt-0 mb-4"}),(0,a.jsx)(l,{}),(0,a.jsxs)("div",{className:"mb-10 grid xl-[1320px] xl:grid-cols-4 lg:grid-cols-3 md:grid-cols-2 grid-cols-1 justify-items-center",children:[(0,a.jsx)(c,{}),(0,a.jsx)(c,{}),(0,a.jsx)(c,{}),(0,a.jsx)(c,{})]})]})}var d=s(47516),h=s(63750),m=s(69077),x=s(42474),p=s.n(x);function u(e){if(!e)return"";if(e.length<=12)return e;{let t=e.slice(0,6),s=e.slice(-6);return"".concat(t,"...").concat(s)}}function j(e){let t={};for(let s in e)"@context"===s?t.context=e[s]:t[s]=e[s];return t}var f=s(82010);function v(e){let{handleCopyClick:t,did:s}=e,[i,r]=(0,n.useState)(!1),[c,l]=(0,n.useState)(!1),{address:o,isConnected:x}=(0,m.mA)(),{theme:p}=(0,f.F)(),j=()=>{navigator.clipboard.writeText(o).then(()=>{r(!0),setTimeout(()=>{r(!1)},1e3)})},v=()=>{navigator.clipboard.writeText(s).then(()=>{l(!0),setTimeout(()=>{l(!1)},1e3)})};return(0,a.jsx)(a.Fragment,{children:x?(0,a.jsx)("div",{className:"ml-4",children:(0,a.jsxs)("div",{className:"realtive dark:border-white dark:border-solid dark:border-2 card w-[350px] p-2 light:bg-white shadow-[0_3px_10px_rgb(0,0,0,0.2)] mt-3 text-[#2E1503]",children:[(0,a.jsx)("div",{className:"card-body",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsx)("img",{src:"https://github.com/EricLin0619/BeePoll/blob/gh-pages/ethereum.png?raw=true",className:"w-16"}),(0,a.jsx)("span",{className:"mt-2 font-bold font-mono dark:text-white",children:"Goerli"})]}),(0,a.jsxs)("div",{className:"ml-auto",children:[(0,a.jsxs)("div",{className:"mb-2",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(d.xa5,{className:"text-black dark:text-white w-5 h-auto mr-1"}),(0,a.jsx)("span",{className:"font-mono font-bold dark:text-white",children:"Wallet Address"})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("p",{className:"font-mono dark:text-white",children:u(o)}),i?(0,a.jsx)(h.IQF,{className:"text-green-500 w-5 h-auto ml-1"}):(0,a.jsx)(d.LhG,{className:"text-black w-5 h-auto ml-1 cursor-pointer dark:text-white",onClick:()=>{t(),j()}})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(d.cf2,{className:"text-black dark:text-white w-5 h-auto mr-1"}),(0,a.jsx)("span",{className:"font-mono font-bold dark:text-white",children:"DID"})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("p",{className:"font-mono dark:text-white",children:s?u(s):"..."}),c?(0,a.jsx)(h.IQF,{className:"text-green-500 w-5 h-auto ml-1"}):(0,a.jsx)(d.LhG,{className:"text-black w-5 h-auto ml-1 cursor-pointer dark:text-white",onClick:()=>{t(),v()}})]})]})]})]})}),(0,a.jsx)("a",{href:"https://explorer.hypersign.id/hypersign-testnet/identity/"+s,target:"_blank",rel:"noreferrer",children:(0,a.jsx)("p",{className:"font-mono absolute bottom-0.5 right-2 text-black text-sm",children:"more..."})})]})}):(0,a.jsx)("div",{className:"ml-4",children:(0,a.jsx)("div",{className:" dark:border-white dark:border-solid dark:border-2 card w-[350px] p-2 light:bg-white shadow-[0_3px_10px_rgb(0,0,0,0.2)] mt-3 text-[#2E1503]",children:(0,a.jsx)("div",{className:"card-body",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex flex-col items-center",children:"dark"===p?(0,a.jsx)("img",{src:"whiteChain.png",className:"w-16"}):(0,a.jsx)("img",{src:"blackChain.png",className:"w-16"})}),(0,a.jsxs)("div",{className:"ml-auto",children:[(0,a.jsxs)("div",{className:"mb-2",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(d.xa5,{className:"text-black dark:text-white w-5 h-auto mr-1"}),(0,a.jsx)("span",{className:"font-mono font-bold dark:text-white",children:"Wallet Address"})]}),(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)("p",{className:"font-mono dark:text-white",children:"..."})})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(d.cf2,{className:"text-black dark:text-white w-5 h-auto mr-1"}),(0,a.jsx)("span",{className:"font-mono font-bold dark:text-white",children:"DID"})]}),(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)("p",{className:"font-mono dark:text-white",children:"..."})})]})]})]})})})})})}var g=s(89583),N=s(1451),b=s(6154);let w=async()=>{try{let e=await b.Z.post("https://api.entity.hypersign.id/api/v1/app/oauth",{},{headers:{accept:"application/json","X-Api-Secret-Key":"1fae14d6e06b702c5b825e469fc2b.7e218298064c0cc5c00aedcfe73cb2c501b60cea1209245a471e4c53334c6dca457635a7884658350fe602aa21de03fbb"}});return e.data.access_token}catch(e){console.error("Error occurred:",e.message)}},y=async(e,t)=>{try{let s=await b.Z.post("https://api.entity.hypersign.id/api/v1/did/create",{namespace:"testnet",options:{keyType:"EcdsaSecp256k1RecoveryMethod2020",walletAddress:e,chainId:"0x1",verificationRelationships:["assertionMethod","authentication","capabilityInvocation","capabilityDelegation"]}},{headers:{accept:"application/json",Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}});console.log("createDid response:",JSON.stringify(s.data,null,2));let a=s.data.metaData.didDocument,i=a["@context"];delete a["@context"],delete a.keyAgreement;let n={context:i,...a};return n}catch(e){throw console.error("API error:",e),e}},k=async(e,t,s)=>{let a={didDocument:e,signInfos:[{verification_method_id:e.verificationMethod[0].id,clientSpec:{type:"eth-personalSign"},signature:t}]};try{let e=await b.Z.post("https://api.entity.hypersign.id/api/v1/did/register",a,{headers:{accept:"application/json",Authorization:"Bearer ".concat(s),"Content-Type":"application/json"}});return console.log("registerDid response:",e.data),e.data.did}catch(e){throw console.error("registerDID error:",e),e}},D=async(e,t,s)=>{let a={didDocument:e,signInfos:[{verification_method_id:e.verificationMethod[0].id,clientSpec:{type:"eth-personalSign"},signature:t}],deactivate:!1};try{let e=await b.Z.patch("https://api.entity.hypersign.id/api/v1/did",a,{headers:{accept:"application/json",Authorization:"Bearer ".concat(s),"Content-Type":"application/json"}});return console.log("updateDid response:",e.data),e.data}catch(e){throw console.error("updateDid error:",e),e}},C=async(e,t)=>{try{let s=await b.Z.get("https://api.entity.hypersign.id/api/v1/did/resolve/".concat(e),{headers:{accept:"application/json",Authorization:"Bearer ".concat(t)}});return s.data}catch(e){console.error("Error occurred:",e.message)}},E=async(e,t,s)=>{let a=await w(),i={schemaId:"sch:hid:testnet:z4RzEpiYEiJArpJDo9ay74db8E3fQW2Ppau67b2v6JMX5:1.0",subjectDid:e,issuerDid:"did:hid:testnet:z996acTcJsUzLZb2HwPnoX9YrDmj5u41vGpWYUkTSEZMg",expirationDate:"2027-12-10T18:30:00.000Z",fields:{name:t.name,nickname:t.nickname,picture:t.picture,sub:t.sub},namespace:"testnet",verificationMethodId:"did:hid:testnet:z996acTcJsUzLZb2HwPnoX9YrDmj5u41vGpWYUkTSEZMg#key-1",persist:!0};try{let e=await b.Z.post("https://api.entity.hypersign.id/api/v1/credential/issue",i,{headers:{accept:"application/json",Authorization:"Bearer ".concat(a),"Content-Type":"application/json"}});return e.data.credentialStatus.claim.id}catch(e){throw console.error("issue Vc error:",e),e}},_=async e=>{let t=await w();try{let s=await b.Z.get("https://api.entity.hypersign.id/api/v1/credential/".concat(e),{headers:{accept:"application/json",Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}});return s.data.credentialStatus}catch(e){throw console.error("get Vc error:",e),e}};function S(e){var t,s;let[i,r]=(0,n.useState)(!1),{address:c,isConnected:l}=(0,m.mA)(),[o,x]=(0,n.useState)({id:"",issuanceDate:"",expirationDate:""}),p="https://explorer.hypersign.id/hypersign-testnet/revocationRegistry/".concat(o.id);(0,n.useEffect)(()=>{!async function(){var t,s,a,i;let n=await w();if(""===e.did){console.log("no did yet");return}let r=await C(e.did,n);if((null===(t=null==r?void 0:null===(s=r.didDocument)||void 0===s?void 0:s.service[0])||void 0===t?void 0:t.serviceEndpoint)===void 0)return x({id:"",issuanceDate:"",expirationDate:""}),console.log("no serviceEndpoint");let c=await _(null===(a=null==r?void 0:null===(i=r.didDocument)||void 0===i?void 0:i.service[0])||void 0===a?void 0:a.serviceEndpoint);x({id:c.claim.id,issuanceDate:c.issuanceDate,expirationDate:c.expirationDate})}()},[l,e.did,c]);let j=()=>{let e=o.id;navigator.clipboard.writeText(e).then(()=>{r(!0),setTimeout(()=>{r(!1)},1e3)})};return(0,a.jsxs)("div",{className:"bg-gradient-to-r from-[#42275a] to-[#734b6d] card w-[350px] p-2 text-white shadow-[0_3px_10px_rgb(0,0,0,0.2)]",children:[(0,a.jsx)("div",{className:"card-body",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex flex-col items-center",children:""!==o.id&&l?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(g.hJX,{className:"w-16 h-auto ml-auto mr-1"}),(0,a.jsx)("span",{className:"mt-2 font-bold font-mono",children:"Github"})]}):(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(N.tU0,{className:"w-16 h-auto ml-auto mr-1"})})}),(0,a.jsxs)("div",{className:"ml-auto",children:[(0,a.jsxs)("div",{className:"mb-2",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(d.xa5,{className:"w-5 h-auto mr-1"}),(0,a.jsx)("span",{className:"font-mono font-bold",children:"Credentail ID"})]}),(0,a.jsx)("div",{className:"flex items-center text-[#cccccc]",children:""!==o.id&&l?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{className:"font-mono",children:u(o.id)}),i?(0,a.jsx)(h.IQF,{className:"text-green-500 w-5 h-auto ml-1"}):(0,a.jsx)(d.LhG,{className:"w-5 h-auto ml-1 cursor-pointer",onClick:()=>{e.handleCopyClick(),j()}})]}):(0,a.jsx)("p",{className:"font-mono",children:"..."})})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(g.fSQ,{className:"w-5 h-auto mr-1"}),(0,a.jsx)("p",{className:"font-mono font-bold",children:"Duration"})]}),""!==o.id&&l?(0,a.jsx)("p",{className:"font-mono tracking-tight text-[#cccccc]",children:"".concat(null==o?void 0:null===(t=o.issuanceDate)||void 0===t?void 0:t.slice(0,10),"~").concat(null==o?void 0:null===(s=o.expirationDate)||void 0===s?void 0:s.slice(0,10))}):(0,a.jsx)("p",{className:"font-mono",children:"..."})]})]})]})}),""!==o.id&&l&&(0,a.jsx)("a",{href:p,target:"_blank",rel:"noreferrer",children:(0,a.jsx)("p",{className:"font-mono absolute bottom-0.5 right-2 text-[#cccccc] text-sm",children:"more..."})})]})}var I=s(64078);let T=async e=>{try{var t,s;let a=await w(),i=await C("did:hid:testnet:"+e,a);if((null==i?void 0:null===(t=i.didDocument)||void 0===t?void 0:t.id)!==void 0)return null==i?void 0:null===(s=i.didDocument)||void 0===s?void 0:s.id;{let t=await y(e,a),s=JSON.stringify(t),i=await (0,I.l)({message:s}),n=await k(t,i,a);return n}}catch(e){console.error("Error occurred during DID registration:",e)}},A=async(e,t,s,a)=>{try{let i=await w(),n=x.createHash("sha256").update(s+a).digest("hex");console.log("hash",n);let r=await C("did:hid:testnet:"+e,i).then(e=>e.didDocument);0==r.service.length?r.service.push({id:"did:hid:testnet:z23dCariJNNpMNca86EtVZVvrLpn61isd86fWVyWa8Jkm#linked-domain",type:"LinkedDomains",serviceEndpoint:t+"#"+n}):(r.keyAgreement=[],r.service=[{id:"did:hid:testnet:z23dCariJNNpMNca86EtVZVvrLpn61isd86fWVyWa8Jkm#linked-domain",type:"LinkedDomains",serviceEndpoint:t+"#"+n}]);let c=j(JSON.parse(JSON.stringify(j(r),(e,t)=>{if(!(""===t||Array.isArray(t)&&0===t.length))return t}))),l=await (0,I.l)({message:JSON.stringify(c)}),o=await D(c,l,i);return o}catch(e){console.error("Error occurred during DID binding:",e)}};var J=s(73606);let L=e=>{let{children:t,href:s,className:n,tabIndex:r,testId:c}=e,l=(0,i.useRouter)(),o="navbar-item-active",d=n?"".concat(n," ").concat(o):o;return(0,a.jsx)("span",{className:"d-inline-flex align-items-center navbar-item",children:(0,a.jsx)("span",{className:l.asPath===s?d:n,tabIndex:r,"data-testid":c,children:t})})},z=e=>{let{children:t,href:s,className:i,icon:n,tabIndex:r,testId:c}=e;return(0,a.jsx)("a",{href:s,children:(0,a.jsx)(L,{href:s,className:i,icon:n,tabIndex:r,testId:c,children:t})})};var M=s(70112);let Z=async e=>{let t=await (0,M.Ue)({publicKey:{challenge:p().randomBytes(32).toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,""),rp:{name:"next-webauthn",id:"localhost"},user:{id:window.crypto.randomUUID(),name:e,displayName:e},pubKeyCredParams:[{alg:-7,type:"public-key"}],timeout:6e4,attestation:"direct",authenticatorSelection:{residentKey:"required",userVerification:"required"}}});return console.log("create credential",JSON.stringify(t,null,2)),t.id};function W(e){let t=(0,J.aF)(),{address:s,isConnected:i}=(0,m.mA)(),[r,c]=(0,n.useState)("");return(0,n.useEffect)(()=>{async function e(){let e=await T(s);c(e)}i&&e()},[s,i,r]),(0,n.useEffect)(()=>{async function e(){var e;console.log("create vc");let a=await Z(r);console.log("webAuthnId",a);let i=await E(r,t.user,a),n=null===(e=t.user)||void 0===e?void 0:e.sub,c=await A(s,i,n,a);console.log(c)}console.log("github user",JSON.stringify(t,null,2)),""!=r&&void 0!=t.user&&e()},[s,r,t]),(0,a.jsxs)("div",{className:"dark:bg-slate-800",children:[(0,a.jsxs)("div",{className:"flex mt-10 w-1/2",children:[(0,a.jsx)("p",{className:"font-mono text-black font-bold text-3xl ml-5  dark:text-white",children:"IDENTITY"}),(0,a.jsx)(z,{href:"/api/auth/login",className:"btn btn-outline h-1/3 p-1 btn-warning ml-auto",tabIndex:0,testId:"navbar-login-desktop",children:"Get Credential"})]}),(0,a.jsx)("div",{className:"divider ml-5 mr-auto w-1/2 my-[0px]"}),(0,a.jsxs)("div",{className:"flex items-center mt-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-mono text-black text-xl ml-5 mt-3 mb-7 dark:text-white",children:"LINKED WALLET"}),(0,a.jsx)(v,{handleCopyClick:e.handleCopyClick,did:r})]}),(0,a.jsxs)("div",{className:"ml-7",children:[(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)("span",{className:"font-mono text-black text-xl ml-5 mt-3 mb-7 dark:text-white",children:"CREDENTIALS"})}),(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)(S,{handleCopyClick:e.handleCopyClick,did:r})})]})]})]})}function V(){return(0,a.jsxs)("div",{className:"alert alert-success w-[230px] absolute top-0 right-0",children:[(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"stroke-current shrink-0 h-6 w-6",fill:"none",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,a.jsx)("span",{children:"Copied to clipboard"})]})}var F=function(){let[e,t]=(0,n.useState)(!1),s=()=>{t(!0),setTimeout(()=>{t(!1)},1e3)};return(0,a.jsxs)("div",{className:"relative dark:bg-slate-800",children:[e&&(0,a.jsx)(V,{}),(0,a.jsx)(W,{handleCopyClick:s}),(0,a.jsx)(o,{})]})}}},function(e){e.O(0,[570,13,874,591,774,888,179],function(){return e(e.s=48312)}),_N_E=e.O()}]);